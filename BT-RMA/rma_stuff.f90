!_--------------------------------------------------------------------
!_--------------------------------------------------------------------

      subroutine setup_rma

!_--------------------------------------------------------------------
!_--------------------------------------------------------------------

!_--------------------------------------------------------------------
! set up MPI-2 RMA-specific stuff
!_--------------------------------------------------------------------
      use bt_data
      use mpinpb
      integer error, type_size, i
      integer grp_solve

      integer(kind=MPI_ADDRESS_KIND) win_size


      call mpi_type_size(dp_type, type_size, error)

!_--------------------------------------------------------------------
!     Create MPI-2 RMA window for solver communication
!_--------------------------------------------------------------------

      win_size = BUF_SIZE * type_size
      call mpi_win_create(out_buffer, win_size, type_size, MPI_INFO_NULL, comm_solve, win_solve, error)

!_--------------------------------------------------------------------
!     Create MPI-2 RMA window(s) for face exchange
!_--------------------------------------------------------------------

      call mpi_win_create(in_buffer, win_size, type_size, MPI_INFO_NULL, comm_rhs, win_rhs, error)

      return
      end


!_--------------------------------------------------------------------
!_--------------------------------------------------------------------

      subroutine cleanup_rma

!_--------------------------------------------------------------------
!_--------------------------------------------------------------------

!_--------------------------------------------------------------------
! clean up MPI-2 RMA-specific stuff
!_--------------------------------------------------------------------

      use mpinpb
      implicit none
      integer error, i

!_--------------------------------------------------------------------
!     Release MPI-2 RMA windows
!_--------------------------------------------------------------------

      call mpi_win_free(win_solve, error)
      call mpi_win_free(win_rhs, error)

      return
      end
